<!DOCTYPE html>
<html>
  <head>
    <title>Simple Web Interface For Demonstration Purposes</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />
    <meta charset="utf-8" />
  </head>
  <body
    style="
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      font-size: 13px;
    "
  >
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <!-- <uidiv> -->
    <!-- <div id="warning">
      <h1 style="font-weight: 500">
        Speech Recognition Speech SDK not found
        (microsoft.cognitiveservices.speech.sdk.bundle.js missing).
      </h1>
    </div> -->
    <div class="container">
      <div class="row justify-content-center">
        <h1>Patient Records Management</h1>
        <div class="col">
          <form>
            <div class="row">
              <div class="col-10 mb-3">
                <label for="exampleInputEmail1" class="form-label"
                  >Name of the Patient</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="phraseDiv"
                  aria-describedby="patientName"
                />
              </div>
              <div class="col-2 mt-4 p-2">
                <button
                  id="startRecognizeOnceAsyncButton"
                  onclick="displayRecordedMessage(phraseDiv)"
                >
                  <i data-feather="mic"></i>
                  <script>
                    feather.replace();
                  </script>
                </button>
              </div>
            </div>
            <div class="row">
              <div class="col-10 mb-3">
                <label for="exampleInputPassword1" class="form-label"
                  >Disease Description</label
                >
                <div class="form-floating">
                  <textarea
                    class="form-control"
                    placeholder="Leave a comment here"
                    id="floatingTextarea2"
                    style="height: 100px"
                  ></textarea>
                </div>
              </div>
              <div class="col-2 mt-4 p-2">
                <button
                  id="startRecognizeOnceAsyncButton"
                  onclick="displayRecordedMessage(phraseDiv)"
                >
                  <i data-feather="mic"></i>
                  <script>
                    feather.replace();
                  </script>
                </button>
              </div>
            </div>
              <button type="submit" class="btn btn-primary">Submit</button>
            </div>
          </form>
        </div>
        <!-- <div id="content" style="display: none">
          <table width="100%">
            <tr>
              <td></td>
              <td>
                <h1 style="font-weight: 500">
                  Simple Web Interface For Demonstration Purposes
                </h1>
              </td>
            </tr>
            <tr>
              <td align="right">Subscription:</td>
              <td>
                <input
                  id="subscriptionKey"
                  type="text"
                  size="40"
                  value="subscription"
                />
              </td>
            </tr>
            <tr>
              <td align="right">Region:</td>
              <td>
                <input
                  id="serviceRegion"
                  type="text"
                  size="40"
                  value="YourServiceRegion"
                />
              </td>
            </tr>
            <tr>
              <td></td>
              <td>
                <button id="startRecognizeOnceAsyncButton">
                  <i data-feather="mic"></i>
                  <script>
                    feather.replace();
                  </script>
                </button>
              </td>
            </tr>
            <tr>
              <td align="right" align="top">Transcriptions:</td>
              <td>
                <textarea
                  id="phraseDiv"
                  style="display: inline-block; width: 500px; height: 200px"
                ></textarea>
              </td>
            </tr>
          </table>
        </div> -->
      </div>
    </div>

    <!-- </uidiv> -->

    <!-- <speechsdkref> -->
    <!-- Speech SDK reference sdk. -->
    <script src="https://aka.ms/csspeech/jsbrowserpackageraw"></script>
    <!-- </speechsdkref> -->

    <!-- <quickstartcode> -->
    <!-- Speech SDK USAGE -->
    <script>
      // status fields and start button in UI
      var phraseDiv;
      var startRecognizeOnceAsyncButton;

      // subscription key and region for speech services.
      var subscriptionKey, serviceRegion;
      var SpeechSDK;
      var recognizer;
      var speechConfig = SpeechSDK.SpeechConfig.fromSubscription(
        "79580a75442343da8ae25700d1afa3f1",
        "eastus"
      );

      speechConfig.endpointId = "c113e6ff-eef8-46ec-a249-43018690258a";
      var audioConfig = SpeechSDK.AudioConfig.fromDefaultMicrophoneInput();
      recognizer = new SpeechSDK.SpeechRecognizer(speechConfig, audioConfig);

      function displayRecordedMessage(input) {
        event.preventDefault();
        console.log("Shiiit");
        //startRecognizeOnceAsyncButton.disabled = true;
        //document.getElementById(input.toString()).innerHTML = "";

        recognizer.recognizeOnceAsync(
          (result) => {
            // startRecognizeOnceAsyncButton.disabled = false;
            document.getElementById(input.toString()).value = result.text;
            window.console.log(result);

            recognizer.close();
            recognizer = undefined;
          },
          (err) => {
            // startRecognizeOnceAsyncButton.disabled = false;
            document.getElementById(input.toString()).value = err;
            window.console.log(err);

            recognizer.close();
            recognizer = undefined;
          }
        );
      }

      // if (!!window.SpeechSDK) {
      //   SpeechSDK = window.SpeechSDK;
      //   startRecognizeOnceAsyncButton.disabled = false;

      //   document.getElementById("content").style.display = "block";
      //   document.getElementById("warning").style.display = "none";
      // }
    </script>
    <!-- </quickstartcode> -->
  </body>
</html>
